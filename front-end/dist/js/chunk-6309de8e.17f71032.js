(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6309de8e"],{"12b9":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"px-8 py-0",attrs:{fluid:""},scopedSlots:t._u([{key:"after-heading",fn:function(){},proxy:!0}])},[i("v-row",{staticClass:"d-flex justify-space-between mx-1 mb-0"},[i("div",[i("v-row",[i("v-switch",{staticClass:"mx-3",staticStyle:{"max-width":"100px"},attrs:{label:"倒序"},model:{value:t.listQuery.orderby_lastupdate_desc,callback:function(e){t.$set(t.listQuery,"orderby_lastupdate_desc",e)},expression:"listQuery.orderby_lastupdate_desc"}}),i("v-select",{staticClass:"mx-3",staticStyle:{"max-width":"150px"},attrs:{items:t.gardenOptions,"item-text":"name","item-value":"id","menu-props":"auto","hide-details":"",label:"小区","single-line":""},model:{value:t.listQuery.garden_id,callback:function(e){t.$set(t.listQuery,"garden_id",e)},expression:"listQuery.garden_id"}}),i("v-text-field",{staticClass:"mx-3",staticStyle:{"max-width":"50px"},attrs:{label:"幢","hide-details":"","single-line":""},model:{value:t.listQuery.building_name,callback:function(e){t.$set(t.listQuery,"building_name",e)},expression:"listQuery.building_name"}}),i("v-text-field",{staticClass:"mx-3",staticStyle:{"max-width":"50px"},attrs:{label:"单元","hide-details":"","single-line":""},model:{value:t.listQuery.unit_name,callback:function(e){t.$set(t.listQuery,"unit_name",e)},expression:"listQuery.unit_name"}}),i("v-text-field",{staticClass:"mx-3",staticStyle:{"max-width":"150px"},attrs:{label:"门牌号码","hide-details":"","single-line":""},model:{value:t.listQuery.number,callback:function(e){t.$set(t.listQuery,"number",e)},expression:"listQuery.number"}}),i("v-select",{staticClass:"mx-3",staticStyle:{"max-width":"80px"},attrs:{items:t.areaitemOptions,"item-text":"display_name","item-value":"key","menu-props":"auto","hide-details":"",label:"户型","single-line":""},model:{value:t.listQuery.areaitem_id,callback:function(e){t.$set(t.listQuery,"areaitem_id",e)},expression:"listQuery.areaitem_id"}}),i("v-select",{staticClass:"mx-3",staticStyle:{"max-width":"80px"},attrs:{items:t.statusOptions,"item-text":"display_name","item-value":"key","menu-props":"auto","hide-details":"",label:"状态","single-line":""},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}}),i("v-select",{staticClass:"mx-3",staticStyle:{"max-width":"80px"},attrs:{items:t.checkFlagOptions,"item-text":"display_name","item-value":"key","menu-props":"auto","hide-details":"",label:"校对","single-line":""},model:{value:t.listQuery.check_flag,callback:function(e){t.$set(t.listQuery,"check_flag",e)},expression:"listQuery.check_flag"}}),i("v-select",{staticClass:"mx-3",staticStyle:{"max-width":"80px"},attrs:{items:t.multiOptions,"item-text":"display_name","item-value":"key","menu-props":"auto","hide-details":"",label:"子母套","single-line":""},model:{value:t.listQuery.multi_flag,callback:function(e){t.$set(t.listQuery,"multi_flag",e)},expression:"listQuery.multi_flag"}})],1)],1),i("div",[i("v-row",{staticClass:"mt-2"},[i("v-btn",{staticClass:"mx-2",attrs:{color:"primary"},on:{click:t.getQuery}},[t._v(" 查询"),i("v-icon",{attrs:{right:""}},[t._v("mdi-magnify")])],1),i("v-btn",{staticClass:"mx-2",attrs:{color:"primary"},on:{click:t.resetQuery}},[t._v(" 重置"),i("v-icon",{attrs:{right:""}},[t._v("mdi-lock-reset")])],1),i("export-excel",{attrs:{fields:t.exportFields,worksheet:"房源数据",name:"九色鹿公寓楼安置房源数据.xls",fetch:t.exportListData,type:"xls"}},[i("v-btn",{staticClass:"mx-2",attrs:{color:"primary"}},[t._v(" 导出"),i("v-icon",{attrs:{right:""}},[t._v("mdi-arrow-down-bold-circle-outline")])],1)],1),t.isAdminRole?i("div",[i("AddHouseDialog")],1):t._e()],1)],1)]),i("v-alert",{attrs:{value:t.alert,color:"red",dark:"",border:"top",icon:"mdi-bell",transition:"scale-transition"}},[t._v(" "+t._s(t.alert_text)+" ")]),i("v-simple-table",{staticClass:"pa-3",attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",[t._v("ID")]),i("th",[t._v("房源编号")]),i("th",[t._v("小区 | 地块")]),i("th",[t._v("楼幢")]),i("th",[t._v("单元")]),i("th",[t._v("总楼层")]),i("th",[t._v("所在楼层")]),i("th",[t._v("层级差")]),i("th",{staticClass:"text-right"},[t._v("门牌号码")]),i("th",{staticClass:"text-right"},[t._v("建筑面积")]),i("th",[t._v("户型")]),i("th",[t._v("状态")]),i("th",[t._v("校对")]),i("th",[t._v("子母套")]),i("th",[t._v("项目名称")]),i("th",[t._v("最后更新")]),i("th")])]),i("tbody",t._l(t.items,(function(e){return i("tr",{key:e.id},[i("td",{staticClass:"grey--text",staticStyle:{"font-size":"11px"}},[t._v(" "+t._s(e.id)+" ")]),i("td",[t._v(" "+t._s(e.house_code)+" ")]),i("td",[t._v(" "+t._s(e.garden)+" ")]),i("td",[t._v(" "+t._s(e.building)+" ")]),i("td",[t._v(" "+t._s(e.unit)+" ")]),i("td",[t._v(" "+t._s(e.floors)+" ")]),i("td",[t._v(" "+t._s(e.floor)+" ")]),i("td",[t._v(" "+t._s(e.feefloat)+" ")]),i("td",{staticClass:"text-right"},[t._v(" "+t._s(e.number)+" ")]),i("td",{staticClass:"text-right"},[t._v(" "+t._s(e.area)+" ")]),i("td",[t._v(" "+t._s(e.house_type)+" ")]),i("td",[i("v-chip",{staticClass:"ma-0",attrs:{color:0==e.status?t.greenColor:t.redColor,"text-color":"white"}},[i("h3",[t._v(t._s(t.getNamefromOptions(t.statusOptions,e.status)))])])],1),i("td",[i("span",{class:"checkflag-status-"+e.check_flag},[t._v(" "+t._s(t.getNamefromOptions(t.checkFlagOptions,e.check_flag))+" ")])]),i("td",[e.multi_flag?i("span",[i("v-icon",{attrs:{color:"red"}},[t._v("mdi-tag-text-outline")])],1):i("span",[i("v-icon",{attrs:{color:"grey"}},[t._v("mdi-tag-outline")])],1)]),i("td",[t._v(" "+t._s(e.villagecomb)+" ")]),i("td",[t._v(" "+t._s(t.$moment(e.last_update).utc().format("MM-DD HH:mm"))+" "),t.isAdminRole?i("v-btn",{staticClass:"ml-1",attrs:{color:"warning",text:"","x-small":""},on:{click:function(i){return t.removeHouse(e)}}},[i("v-icon",[t._v("mdi-delete")])],1):t._e()],1)])})),0)]},proxy:!0}])}),i("v-pagination",{staticClass:"my-3",attrs:{circle:t.circle,disabled:t.disabled,length:t.total_pages,"next-icon":t.nextIcon,"prev-icon":t.prevIcon,"total-visible":t.totalVisible,value:t.listQuery.page},on:{input:t.paginationChangeHandler},model:{value:t.listQuery.page,callback:function(e){t.$set(t.listQuery,"page",e)},expression:"listQuery.page"}}),i("v-snackbar",{attrs:{timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},a=[],n=(i("4160"),i("caad"),i("d3b7"),i("2532"),i("498a"),i("159b"),i("f2cf")),l=i("d5d5"),r=[{key:0,display_name:"未选"},{key:1,display_name:"已选"},{key:9,display_name:"入库"}],o=[{key:0,display_name:"否"},{key:1,display_name:"是"}],u=[{key:0,display_name:"✘"},{key:1,display_name:"✔"}],c=[{key:1,display_name:"小户型"},{key:2,display_name:"中户型"},{key:3,display_name:"大户型"}],d={name:"Houses",components:{AddHouseDialog:function(){return Promise.all([i.e("chunk-2d20f6a7"),i.e("chunk-7bc15204")]).then(i.bind(null,"4a44"))}},data:function(){return{snackbar:!1,text:"",timeout:3e3,alert:!1,alert_text:"",action:{color:"info",icon:"mdi-message-text"},exportItems:[],items:[],listQuery:{page:1,limit:15,status:void 0,check_flag:void 0,building_name:void 0,unit_name:void 0,number:void 0,orderby_lastupdate_desc:void 0,sort:"+id"},search:void 0,awaitingSearch:!1,circle:!0,disabled:!1,length:10,greenColor:"rgb(81, 185, 116)",blankColor:"rgb(90, 90, 90)",redColor:"rgb(231, 111, 111)",starColor:"rgb(240, 70, 70)",orangeColor:"rgb(247, 172, 11)",nextIcon:"mdi-chevron-right",prevIcon:"mdi-chevron-left",totalVisible:12,total_pages:0,gardenOptions:[],statusOptions:r,multiOptions:o,checkFlagOptions:u,areaitemOptions:c,exportFields:{"序号":"id","房源编号":"house_code","小区或地块":"garden","楼幢":{field:"building",callback:function(t){return"'".concat(t)}},"单元":"unit","门牌":"number","楼层":"floor","状态":"status","面积":"area","车库面积":"sub_area","户型类别":"house_type"}}},computed:{isAdminRole:function(){return!!this.$store.getters.roles.includes("administrator")}},created:function(){this.getList(),this.getGardens()},watch:{},methods:{getGardens:function(){var t=this;Object(l["b"])().then((function(e){t.gardenOptions=e.data.items[0],setTimeout((function(){t.listLoading=!1}),1500)})),console.log("gardenOptions:",this.gardenOptions)},getQuery:function(){this.listQuery.page=1,this.getList()},getList:function(){var t=this;this.listLoading=!0,this.listQuery.limit=12,this.listQuery.number&&(this.listQuery.number=this.listQuery.number.trim()),this.listQuery.building_name&&(this.listQuery.building_name=this.listQuery.building_name.trim()),this.listQuery.unit_name&&(this.listQuery.unit_name=this.listQuery.unit_name.trim()),Object(n["c"])(this.listQuery).then((function(e){t.items=e.data.items,t.total_pages=e.data._meta.total_pages,console.log(t.items),setTimeout((function(){t.listLoading=!1}),1500)}))},exportListData:function(){var t=this;return this.listLoading=!0,this.listQuery.limit=1e4,Object(n["c"])(this.listQuery).then((function(e){t.exportItems=e.data.items,setTimeout((function(){t.listLoading=!1}),1500)})),this.exportItems},resetQuery:function(){this.listQuery={page:1,limit:10,sort:"+id"},this.getList()},handleToDetails:function(t){this.$router.push({name:"房源详情",params:{id:t.id}})},removeHouse:function(t){var e=this;this.$confirm("确认删除房源资料?").then((function(i){i&&Object(n["b"])(t.id).then((function(t){t.data.error?(e.alert_text=t.data.error,e.alert=!0):(e.getList(),e.text="房源资料删除成功！",e.snackbar=!0)}))}))},getNamefromOptions:function(t,e){var i="";return t.forEach((function(t){t.key===e&&(i=t.display_name)})),i},paginationChangeHandler:function(t){this.listQuery.page=t,this.getList()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}}},m=d,h=(i("6718"),i("2877")),_=i("6544"),p=i.n(_),v=i("0798"),g=i("8336"),f=i("cc20"),y=i("a523"),b=i("132d"),x=i("891e"),k=i("0fd9"),Q=i("b974"),C=i("1f4f"),w=i("2db4"),O=i("b73d"),S=i("8654"),$=Object(h["a"])(m,s,a,!1,null,"65c665c7",null);e["default"]=$.exports;p()($,{VAlert:v["a"],VBtn:g["a"],VChip:f["a"],VContainer:y["a"],VIcon:b["a"],VPagination:x["a"],VRow:k["a"],VSelect:Q["a"],VSimpleTable:C["a"],VSnackbar:w["a"],VSwitch:O["a"],VTextField:S["a"]})},6718:function(t,e,i){"use strict";var s=i("d2f0"),a=i.n(s);a.a},d2f0:function(t,e,i){},d5d5:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return n}));var s=i("b775");function a(t){return Object(s["a"])({url:"/gardenslist",method:"get",params:t})}function n(t){return Object(s["a"])({url:"/gardens",method:"get",params:t})}},f2cf:function(t,e,i){"use strict";i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return l})),i.d(e,"d",(function(){return r}));var s=i("b775");function a(t){return Object(s["a"])({url:"/houses",method:"get",params:t})}function n(t){return Object(s["a"])({url:"/houses",method:"post",data:t})}function l(t){return Object(s["a"])({url:"/houses/".concat(t),method:"delete"})}function r(){return Object(s["a"])({url:"/houses/count",method:"get"})}}}]);
//# sourceMappingURL=chunk-6309de8e.17f71032.js.map