(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a684652e"],{"3cd7":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{"max-width":"900"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,o=e.attrs;return[n("v-btn",t._g(t._b({staticClass:"mx-2",attrs:{color:"green",dark:""}},"v-btn",o,!1),a),[t._v(" 批量"),n("v-icon",{attrs:{right:""}},[t._v("mdi-crop-free")])],1)]}}]),model:{value:t.dialogScan,callback:function(e){t.dialogScan=e},expression:"dialogScan"}},[n("v-container",{staticClass:"my-container pa-6 "},[n("h1",[t._v("批量新增签约")]),n("v-divider",{staticClass:"mx-4 my-1"}),n("v-alert",{attrs:{border:"left","close-text":"Close Alert",color:"#2A3B4D",dark:"",dismissible:""},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v(" "+t._s(t.alert_text)+" ")]),n("v-row",[n("v-col",{attrs:{cols:"8",sm:"8",md:"8"}},[n("v-text-field",{staticClass:"ml-auto",staticStyle:{"max-width":"300px"},attrs:{autofocus:"","prepend-icon":"mdi-barcode",label:"扫码输入","hide-details":"","single-line":""},on:{input:t.handleScan},model:{value:t.scan.value,callback:function(e){t.$set(t.scan,"value",e)},expression:"scan.value"}})],1)],1),n("div",{attrs:{"v-if":this.temp.customer}},[n("v-row",{staticClass:"display-3 font-weight-light orange--text mx-10"},[n("h3",[t._v(t._s(this.temp.customer.name))])]),n("v-row",{staticClass:"font-weight-light grey--text title mx-10"},[n("p",[t._v(" "+t._s(this.temp.customer.village)+" "+t._s(this.temp.customer.phone)+" "+t._s(this.temp.customer.myarea)+" "+t._s(this.temp.customer_code)+" ")])])],1),n("v-simple-table",{staticClass:"mx-15 mt-6",attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v(" 编号 ")]),n("th",{staticClass:"text-left"},[t._v(" 详细信息 ")])])]),n("tbody",t._l(t.temp.labels,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(e.id))]),n("v-simple-table",{attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[n("tbody",t._l(e.houses,(function(e,a){return n("tr",{key:a},[n("td",[t._v(t._s(e.garden))]),n("td",[t._v(t._s(e.building)+"幢")]),n("td",[t._v(t._s(e.unit)+"单元")]),n("td",[t._v(t._s(e.number)+"室")]),n("td",[t._v(t._s(e.house_type))]),n("td",[t._v(t._s(e.area)+"㎡")]),n("td",[0==e.sub_area?n("span",[t._v(" - ")]):n("span",[t._v(" "+t._s(e.sub_area)+" ㎡")])])])})),0)]},proxy:!0}],null,!0)})],1)})),0)]},proxy:!0}])}),n("div",{staticClass:"my-3"}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:t.cancelAddScanDialog}},[t._v("取消")]),n("v-btn",{attrs:{color:"primary"},on:{click:t.confirmAddScanDialog}},[t._v("确认")])],1)],1)],1)},o=[],c=(n("7db0"),n("a9e3"),n("f8fe")),r=n("9671"),s=n("f85f"),u={name:"AddScanContractDialogBatch",components:{},data:function(){return{alert:!1,alert_text:"",customersList:[],scan:{value:"",type:""},label_code:"",objectItem:{},stringItem:"",dialogScan:!1,temp:{customer:{},labels:[]}}},mounted:function(){},methods:{handleScan:function(){if(console.log("handleScan"),8==this.scan.value.length)if(this.scan.type=this.scan.value.substr(0,1),"9"==this.scan.type){var t=Number(this.scan.value.substr(1,6));console.log("label_id: ",t),this.addTOLabels(t)}else if("8"==this.scan.type){var e=Number(this.scan.value.substr(0,7));console.log("customer_code: ",e),this.getCustomerByCode(e)}},getCustomerByCode:function(t){var e=this;console.log("getCustomer"),Object(r["f"])(t).then((function(t){e.temp.customer=t.data,setTimeout((function(){e.listLoading=!1}),1500)})),this.scan={type:"",value:""}},addTOLabels:function(t){var e=this;console.log("addTOLabels"),Object(s["b"])(t).then((function(t){e.label_code="";var n=t.data,a=0;e.temp.labels&&(a=e.temp.labels.find((function(t){return t.id==n.id}))),0!=t.data.status?(e.alert=!0,e.alert_text="号签状态不匹配"):a||(e.alert=!1,e.temp.labels.push(n)),console.log("found: ",a),console.log(e.temp.labels),setTimeout((function(){e.listLoading=!1}),1500)})),this.scan={type:"",value:""}},confirmAddScanDialog:function(){var t=this,e=this.temp;this.$route.params.id;Object(c["b"])(e).then((function(){t.dialogScan=!1,t.scan={type:"",value:""},t.temp={customer:{},labels:[]},t.label_code="",t.$parent.getList()}))},cancelAddScanDialog:function(){this.dialogScan=!1,this.scan={type:"",value:""},this.temp={customer:{},labels:[]},console.log("cancelAddScanDialog")}}},l=u,i=(n("b73b"),n("2877")),d=n("6544"),m=n.n(d),f=n("0798"),b=n("8336"),h=n("99d9"),p=n("62ad"),v=n("a523"),g=n("169a"),_=n("ce7e"),y=n("132d"),O=n("0fd9"),j=n("1f4f"),x=n("2fa4"),S=n("8654"),C=Object(i["a"])(l,a,o,!1,null,"ff1d73d8",null);e["default"]=C.exports;m()(C,{VAlert:f["a"],VBtn:b["a"],VCardActions:h["b"],VCol:p["a"],VContainer:v["a"],VDialog:g["a"],VDivider:_["a"],VIcon:y["a"],VRow:O["a"],VSimpleTable:j["a"],VSpacer:x["a"],VTextField:S["a"]})},"4d52":function(t,e,n){},9671:function(t,e,n){"use strict";n.d(e,"h",(function(){return o})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return r})),n.d(e,"g",(function(){return s})),n.d(e,"c",(function(){return u})),n.d(e,"k",(function(){return l})),n.d(e,"d",(function(){return i})),n.d(e,"j",(function(){return d})),n.d(e,"i",(function(){return m})),n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return b}));var a=n("b775");function o(t){return Object(a["a"])({url:"/customers",method:"get",params:t})}function c(t){return Object(a["a"])({url:"/customers/".concat(t),method:"get"})}function r(t){return Object(a["a"])({url:"/customers/code/".concat(t),method:"get"})}function s(t,e){return Object(a["a"])({url:"/customers/".concat(t,"/choices"),method:"post",data:e})}function u(t){return Object(a["a"])({url:"/customers",method:"post",data:t})}function l(t,e){return Object(a["a"])({url:"/customers/".concat(t),method:"put",data:e})}function i(t){return Object(a["a"])({url:"/customers/".concat(t),method:"delete"})}function d(){return Object(a["a"])({url:"/customerslist",method:"get"})}function m(){return Object(a["a"])({url:"/customers/count",method:"get"})}function f(t){return Object(a["a"])({url:"/customers/callnumber",method:"post",data:t})}function b(t){return Object(a["a"])({url:"/customers/callnumberbycontrol",method:"post",data:t})}},b73b:function(t,e,n){"use strict";var a=n("4d52"),o=n.n(a);o.a},f85f:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"d",(function(){return c})),n.d(e,"a",(function(){return r})),n.d(e,"f",(function(){return s})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return l})),n.d(e,"i",(function(){return i})),n.d(e,"g",(function(){return d})),n.d(e,"c",(function(){return m}));var a=n("b775");function o(t){return Object(a["a"])({url:"/labels/".concat(t),method:"get"})}function c(t){return Object(a["a"])({url:"/labels",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/labels/".concat(t),method:"delete"})}function s(){return Object(a["a"])({url:"/labelslist",method:"get"})}function u(t,e){return Object(a["a"])({url:"/labels/".concat(t),method:"put",data:e})}function l(){return Object(a["a"])({url:"/labels/count",method:"get"})}function i(t){return Object(a["a"])({url:"/labels",method:"put",data:t})}function d(){return Object(a["a"])({url:"/labels/reset",method:"put"})}function m(){return Object(a["a"])({url:"/labels/statistics",method:"get"})}}}]);
//# sourceMappingURL=chunk-a684652e.76761062.js.map