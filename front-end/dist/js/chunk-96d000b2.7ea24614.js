(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-96d000b2"],{2612:function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"a",(function(){return n}));var a=i("b775");function s(t){return Object(a["a"])({url:"/users",method:"get",params:t})}function n(t){return Object(a["a"])({url:"/users/".concat(t),method:"delete"})}},"43ca":function(t,e,i){"use strict";var a=i("66e0"),s=i.n(a);s.a},4923:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{staticClass:"px-8 py-0",attrs:{fluid:""},scopedSlots:t._u([{key:"after-heading",fn:function(){},proxy:!0}])},[i("v-row",{staticClass:"d-flex justify-space-between mx-1 mb-5"},[i("v-col",{attrs:{cols:"6",md:"10"}},[i("v-text-field",{staticClass:"ml-auto",staticStyle:{"max-width":"360px"},attrs:{"append-icon":"mdi-magnify",label:"Search: 登录名，姓名，微信昵称","hide-details":"","single-line":""},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1)],1),i("v-divider",{staticClass:"mt-3"}),i("v-simple-table",{staticClass:"pa-3",attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[i("thead",[i("tr",[i("th",[t._v("ID")]),i("th",[t._v("账号")]),i("th",[t._v("用户名称")]),i("th",[t._v("角色")]),i("th",{staticClass:"text-right"},[t._v("活跃指数")]),i("th",[t._v("手机号码")]),i("th",[t._v("状态")]),i("th",[t._v("最后一次访问")]),i("th",[t._v("创建时间")]),i("th")])]),i("tbody",t._l(t.items,(function(e){return i("tr",{key:e.id},[i("td",{staticClass:"mb-0 pb-2 pt-0 font-weight-light grey--text",staticStyle:{"font-size":"12p4"}},[t._v(" "+t._s(e.id)+" ")]),i("td",{staticStyle:{"font-size":"13px"}},[t._v(" "+t._s(e.username?e.username:"-")+" ")]),i("td",{staticStyle:{"font-size":"13px"}},[t._v(t._s(e.name?e.name:"-"))]),i("td",{staticStyle:{"font-size":"13px"}},[t._v(" "+t._s(e.role_name?e.role_name:"-")+" ")]),i("td",{staticClass:"text-right",staticStyle:{"font-size":"13px"}},[t._v(t._s(e.login_counts))]),i("td",{staticClass:"mb-0 pb-2 pt-0 font-weight-light",staticStyle:{"font-size":"12p4"}},[t._v(" "+t._s(e.phone?e.phone:"-")+" ")]),i("td",{staticClass:"mb-0 pb-2 pt-0 font-weight-light",staticStyle:{"font-size":"12p4"}},[t._v(" "+t._s(t.getNamefromOptions(t.userStatusOptions,e.status))+" ")]),i("td",{staticClass:"mb-0 pb-2 pt-0 font-weight-light",staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(t.$moment(e.last_seen).utc().fromNow())+" ")]),i("td",{staticClass:"mb-0 pb-2 pt-0 font-weight-light",staticStyle:{"font-size":"14px"}},[t._v(" "+t._s(t.$moment(e.member_since).utc().format("YYYY-MM-DD HH:mm:ss"))+" ")])])})),0)]},proxy:!0}])}),i("div",{staticClass:"text-center"},[i("v-row",{attrs:{justify:"center",align:"center"}},[i("v-pagination",{attrs:{circle:t.circle,disabled:t.disabled,length:t.total_pages,"next-icon":t.nextIcon,"prev-icon":t.prevIcon,"total-visible":t.totalVisible,value:t.listQuery.page},on:{input:t.paginationChangeHandler},model:{value:t.listQuery.page,callback:function(e){t.$set(t.listQuery,"page",e)},expression:"listQuery.page"}})],1)],1),i("v-snackbar",{attrs:{timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},s=[],n=(i("4160"),i("caad"),i("2532"),i("159b"),i("2612")),o=[{key:0,display_name:"待审核"},{key:1,display_name:"正常"},{key:2,display_name:"未通过"},{key:3,display_name:"驳回"}],r={name:"Users",components:{},data:function(){return{snackbar:!1,text:"",timeout:3e3,action:{color:"info",icon:"mdi-blur"},items:[],listQuery:{page:1,limit:100,name:void 0,status:void 0,sort:"+id"},userStatusOptions:o,circle:!0,disabled:!1,length:10,nextIcon:"mdi-chevron-right",prevIcon:"mdi-chevron-left",totalVisible:10,total_pages:""}},computed:{isAdminRole:function(){return!!this.$store.getters.roles.includes("admin")}},created:function(){this.getList()},watch:{search:function(t){var e=this;this.awaitingSearch||setTimeout((function(){e.getList(),e.awaitingSearch=!1}),6e3),this.awaitingSearch=!0}},methods:{getQuery:function(){var t=this;setTimeout((function(){return t.getList()}),500)},getList:function(){var t=this;this.listLoading=!0,Object(n["b"])(this.listQuery).then((function(e){t.items=e.data.items,t.total_pages=e.data._meta.total_pages,console.log(t.items),setTimeout((function(){t.listLoading=!1}),1500)}))},handleToDetails:function(t){this.$router.push({name:"读者详情",params:{id:t.id}})},removeAuthor:function(t){var e=this;this.$confirm("确认删除读者账号?").then((function(i){i&&Object(n["a"])(t.id).then((function(t){e.getList(),e.text="作者删除成功！",e.snackbar=!0}))}))},getNamefromOptions:function(t,e){var i="";return t.forEach((function(t){t.key===e&&(i=t.display_name)})),i},paginationChangeHandler:function(t){this.listQuery.page=t,this.getList()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}}},c=r,l=(i("43ca"),i("2877")),u=i("6544"),d=i.n(u),m=i("62ad"),f=i("a523"),p=i("ce7e"),h=i("891e"),g=i("0fd9"),v=i("1f4f"),_=i("2db4"),b=i("8654"),y=Object(l["a"])(c,a,s,!1,null,"32e8143e",null);e["default"]=y.exports;d()(y,{VCol:m["a"],VContainer:f["a"],VDivider:p["a"],VPagination:h["a"],VRow:g["a"],VSimpleTable:v["a"],VSnackbar:_["a"],VTextField:b["a"]})},"66e0":function(t,e,i){}}]);
//# sourceMappingURL=chunk-96d000b2.7ea24614.js.map