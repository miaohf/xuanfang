(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-416bc591"],{"57dc":function(t,e,a){},8034:function(t,e,a){"use strict";var s=a("57dc"),i=a.n(s);i.a},"8d0d":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{staticClass:"px-8 py-0",attrs:{fluid:""},scopedSlots:t._u([{key:"after-heading",fn:function(){},proxy:!0}])},[a("v-row",{staticClass:"d-flex justify-space-between mx-1 mb-5"},[a("div",[a("v-row",{staticClass:"mx-5"},[a("v-select",{staticClass:"mx-3",staticStyle:{"max-width":"100px"},attrs:{items:t.statusOptions,"item-text":"display_name","item-value":"key","menu-props":"auto","hide-details":"",label:"状态","single-line":""},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}}),a("v-select",{staticClass:"mx-3",staticStyle:{"max-width":"100px"},attrs:{items:t.checkFlagOptions,"item-text":"display_name","item-value":"key","menu-props":"auto","hide-details":"",label:"是否已校对","single-line":""},model:{value:t.listQuery.check_flag,callback:function(e){t.$set(t.listQuery,"check_flag",e)},expression:"listQuery.check_flag"}}),a("v-select",{staticClass:"mx-3",staticStyle:{"max-width":"100px"},attrs:{items:t.multiOptions,"item-text":"display_name","item-value":"key","menu-props":"auto","hide-details":"",label:"是否子母套","single-line":""},model:{value:t.listQuery.multi_flag,callback:function(e){t.$set(t.listQuery,"multi_flag",e)},expression:"listQuery.multi_flag"}})],1)],1),a("div",[a("v-row",{staticClass:"mt-2"},[a("v-btn",{staticClass:"mx-3",attrs:{color:"primary"},on:{click:t.getList}},[t._v(" 查询 "),a("v-icon",{attrs:{right:""}},[t._v("mdi-magnify")])],1),a("v-btn",{staticClass:"mx-3",attrs:{color:"primary"},on:{click:t.resetQuery}},[t._v(" 重置 "),a("v-icon",{attrs:{right:""}},[t._v("mdi-lock-reset")])],1),a("export-excel",{attrs:{fields:t.exportFields,worksheet:"号签数据",name:"九色鹿公寓楼安置号签数据.xls",fetch:t.getListforExport}},[a("v-btn",{staticClass:"mx-3",attrs:{color:"primary"}},[t._v(" 导出 "),a("v-icon",{attrs:{right:""}},[t._v("mdi-arrow-down-bold-circle-outline")])],1)],1),t.isAdminRole?a("div",{staticClass:"mx-3"},[a("CheckinLabelDialog")],1):t._e()],1)],1)]),a("v-alert",{attrs:{value:t.alert,color:"red",dark:"",border:"top",icon:"mdi-bell",transition:"scale-transition"}},[t._v(" "+t._s(t.alert_text)+" ")]),a("v-simple-table",{staticClass:"pa-3",attrs:{"fixed-header":""},scopedSlots:t._u([{key:"default",fn:function(){return[a("thead",[a("tr",[a("th",[t._v("ID")]),a("th",[t._v("编号")]),a("th",[t._v("校对")]),a("th",{staticClass:"text-right"},[t._v("号签详细信息")]),a("th",{staticClass:"text-right"},[t._v("面积")]),a("th",[t._v("子母套")]),a("th",[t._v("状态")]),a("th",[t._v("所在号箱")]),a("th",[t._v("号箱类别")]),a("th",[t._v("最后更新")])])]),a("tbody",t._l(t.items,(function(e){return a("tr",{key:e.id},[a("td",{staticClass:"grey--text",staticStyle:{"font-size":"11px"}},[t._v(" "+t._s(e.id)+" ")]),a("td",[t._v(" "+t._s(e.label_code)+" ")]),a("td",[a("span",{class:"checkflag-status-"+e.check_flag},[t._v(" "+t._s(t.getNamefromOptions(t.checkFlagOptions,e.check_flag))+" ")])]),a("td",[a("v-simple-table",{staticClass:"background-transparent",attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("tbody",t._l(e.houses,(function(e,s){return a("tr",{key:s},[a("td",{staticClass:"text-left",attrs:{width:"100"}},[t._v(t._s(e.garden))]),a("td",{staticClass:"text-right",attrs:{width:"60"}},[t._v(" "+t._s(e.building)+"幢 ")]),a("td",{staticClass:"text-right",attrs:{width:"70"}},[t._v(t._s(e.unit)+"单元")]),a("td",{staticClass:"text-right",attrs:{width:"90"}},[t._v(t._s(e.number)+"室")]),a("td",{staticClass:"text-left",attrs:{width:"90"}},[t._v(" "+t._s(e.house_type)+" ")]),a("td",{staticClass:"text-right",attrs:{width:"120"}},[t._v(t._s(e.area)+"㎡")])])})),0)]},proxy:!0}],null,!0)})],1),a("td",{staticClass:"text-right"},[t._v(" "+t._s(e.area)+" ")]),a("td",[e.multi_flag?a("span",[a("v-icon",{attrs:{color:"red"}},[t._v("mdi-tag-text-outline")])],1):a("span",[a("v-icon",{attrs:{color:"grey"}},[t._v("mdi-tag-outline")])],1)]),a("td",[a("v-chip",{staticClass:"ma-0",attrs:{color:0==e.status?t.greenColor:t.redColor,"text-color":"white"}},[a("h3",[t._v(t._s(t.getNamefromOptions(t.statusOptions,e.status)))])])],1),a("td",[t._v(" "+t._s(e.box_name)+" ")]),a("td",[t._v(" "+t._s(e.box_areaitem_name)+" ")]),a("td",[t._v(" "+t._s(t.$moment(e.last_update).utc().format("MM-DD HH:mm"))+" "),t.isAdminRole?a("v-btn",{staticClass:"ml-1",attrs:{color:"warning",text:"","x-small":""},on:{click:function(a){return t.removeHouse(e)}}},[a("v-icon",{attrs:{small:""}},[t._v("mdi-delete")])],1):t._e()],1)])})),0)]},proxy:!0}])}),a("v-pagination",{staticClass:"my-3",attrs:{circle:t.circle,disabled:t.disabled,length:t.total_pages,"next-icon":t.nextIcon,"prev-icon":t.prevIcon,"total-visible":t.totalVisible,value:t.listQuery.page},on:{input:t.paginationChangeHandler},model:{value:t.listQuery.page,callback:function(e){t.$set(t.listQuery,"page",e)},expression:"listQuery.page"}}),a("v-snackbar",{attrs:{timeout:t.timeout},model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.text)+" ")])],1)},i=[],n=(a("4160"),a("caad"),a("d3b7"),a("2532"),a("159b"),a("f85f")),r=[{key:0,display_name:"未选"},{key:1,display_name:"已选"},{key:9,display_name:"入库"}],l=[{key:1,display_name:"小户型"},{key:2,display_name:"中户型"},{key:3,display_name:"大户型"},{key:9,display_name:"子母套"}],o=[{key:0,display_name:"✘"},{key:1,display_name:"✔"}],c=[{key:0,display_name:"否"},{key:1,display_name:"是"}],u={name:"Houses",components:{CheckinLabelDialog:function(){return a.e("chunk-2d08064e").then(a.bind(null,"054c"))}},data:function(){return{snackbar:!1,text:"",timeout:3e3,alert:!1,alert_text:"",action:{color:"info",icon:"mdi-message-text"},exportItems:[],items:[],listQuery:{page:1,limit:12,multi_flag:void 0,check_flag:void 0,status:void 0,sort:"+id"},search:void 0,awaitingSearch:!1,circle:!0,disabled:!1,length:10,greenColor:"rgb(81, 185, 116)",blankColor:"rgb(90, 90, 90)",redColor:"rgb(231, 111, 111)",starColor:"rgb(240, 70, 70)",orangeColor:"rgb(247, 172, 11)",nextIcon:"mdi-chevron-right",prevIcon:"mdi-chevron-left",totalVisible:10,total_pages:0,statusOptions:r,checkFlagOptions:o,multiOptions:c,boxTypes:l,exportFields:{"序号":"id","号签编号":"label_code","号签类别":"type_name","小区或地块":"garden_name","楼幢":{field:"building_name",callback:function(t){return"'".concat(t)}},"单元":"unit","门牌_A":"number_a","面积_A":"area_a","门牌_B":"number_b","面积_B":"area_b","楼层":"floor","状态":"status","面积":"area","号箱":"box_name","号箱类别":"box_areaitem_name","号箱描述":"box_description","户型类别":"house_type","创建日期":"create_time"}}},computed:{isAdminRole:function(){return!!this.$store.getters.roles.includes("administrator")}},created:function(){this.getList()},watch:{},methods:{getQuery:function(){var t=this;setTimeout((function(){return t.getList()}),500)},getList:function(){var t=this;console.log("xxxx"),this.listLoading=!0,this.listQuery.limit=12,Object(n["d"])(this.listQuery).then((function(e){t.items=e.data.items,t.total_pages=e.data._meta.total_pages,console.log(t.items),setTimeout((function(){t.listLoading=!1}),1500)}))},resetQuery:function(){this.listQuery={page:1,limit:12,sort:"+id"},this.getList()},removeLabel:function(t){var e=this;this.$confirm("确认删除房源资料?").then((function(a){a&&Object(n["a"])(t.id).then((function(t){t.data.error?(e.alert_text=t.data.error,e.alert=!0):(e.getList(),e.text="房源资料删除成功！",e.snackbar=!0)}))}))},getNamefromOptions:function(t,e){var a="";return t.forEach((function(t){t.key===e&&(a=t.display_name)})),a},getListforExport:function(){var t=this;return this.listLoading=!0,this.listQuery.limit=1e4,Object(n["d"])(this.listQuery).then((function(e){t.exportItems=e.data.items,setTimeout((function(){t.listLoading=!1}),1500)})),this.exportItems},paginationChangeHandler:function(t){this.listQuery.page=t,this.getList()},reset:function(){this.$refs.form.reset()},resetValidation:function(){this.$refs.form.resetValidation()}}},d=u,m=(a("8034"),a("2877")),_=a("6544"),f=a.n(_),p=a("0798"),h=a("8336"),g=a("cc20"),b=a("a523"),v=a("132d"),y=a("891e"),x=a("0fd9"),k=a("b974"),C=a("1f4f"),w=a("2db4"),O=Object(m["a"])(d,s,i,!1,null,"3681bccf",null);e["default"]=O.exports;f()(O,{VAlert:p["a"],VBtn:h["a"],VChip:g["a"],VContainer:b["a"],VIcon:v["a"],VPagination:y["a"],VRow:x["a"],VSelect:k["a"],VSimpleTable:C["a"],VSnackbar:w["a"]})},f85f:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"d",(function(){return n})),a.d(e,"a",(function(){return r})),a.d(e,"f",(function(){return l})),a.d(e,"h",(function(){return o})),a.d(e,"e",(function(){return c})),a.d(e,"i",(function(){return u})),a.d(e,"g",(function(){return d})),a.d(e,"c",(function(){return m}));var s=a("b775");function i(t){return Object(s["a"])({url:"/labels/".concat(t),method:"get"})}function n(t){return Object(s["a"])({url:"/labels",method:"get",params:t})}function r(t){return Object(s["a"])({url:"/labels/".concat(t),method:"delete"})}function l(){return Object(s["a"])({url:"/labelslist",method:"get"})}function o(t,e){return Object(s["a"])({url:"/labels/".concat(t),method:"put",data:e})}function c(){return Object(s["a"])({url:"/labels/count",method:"get"})}function u(t){return Object(s["a"])({url:"/labels",method:"put",data:t})}function d(){return Object(s["a"])({url:"/labels/reset",method:"put"})}function m(){return Object(s["a"])({url:"/labels/statistics",method:"get"})}}}]);
//# sourceMappingURL=chunk-416bc591.c0222343.js.map